---
title:  "ネットワークスペシャリスト 令和1年午後Ⅰ問3"
categories: ネットワークスペシャリスト
outline: 勉強方法模索中
tags:
- DHCP
- ARP
- 

---


とにかくわからない単語をひたすらリストアップしていく（このページを覚えていればこの問題に全問こたえられるくらいにする）

## ARPスプーフィング

- 参考書にのってねえ
- ググるとARPキャッシュポイズニングともいうらしい（こっちのほうがイメージしやすいな）
- ブロードキャストされるARPリクエストに不正な応答をしてリクエスト送信元のキャッシュのなかでIPアドレスとMACアドレスを結びつけてしまう
- そのIPアドレスを宛先とする通信を盗み見たりできてしまう

## DHCPリレーエージェント

- クライアントがサーバからTCP/IP設定情報を取得するときにブロードキャストパケットが別ドメイン届かない問題を解消する
- ルータの機能として実装される
- ルータはブロードキャストパケットを受け取るとその中のDHCPメッセージを取り出し、ユニキャストパケットを用いてDHCPサーバに転送する
- ユニキャストなので転送先はあらかじめ設定しなければならない
- 応答も同じくユニキャストパケット
- クライアントからはDHCPリレーエージェントを経由したと意識することなく同一ブロードキャストドメインに存在しているかのように見える
- リレーエージェント情報オプションという情報をDHCPパケットに付加できる（リレーエージェントのMACアドレスとパケットを受信したポート番号など）

## DHCPスヌーピング

- SWが持つ機能
- 正規のDHCPサーバからIPアドレスを割り当てられたPCだけ通信を許可する
- スヌーピングは監視の意味
- SWのポートはUntrustedポートと、Trustedポートの2種類となる
- Trustedポートに接続した機器は通信が可能となる
- Untrustedポートに接続していても、正規のDHCPサーバからIPアドレスが割り当たられていれば通信が可能となる

## ARPパケット
  
```mermaid

sequenceDiagram
    autonumber
    Note over PC, サーバ: IPパケットをサーバに送る際の動き
    PC->>PC: ルーティングテーブルをチェック
    PC->>PC: ARPのキャッシュを確認して見つからなかった

    PC->>サーバ: ARP要求<br/>目標プロトコルアドレスにサーバのアドレスを設定。目標MACアドレスに00-00-00-00-00-00を設定。<br/>送信元プロトコルアドレス、MACアドレスにPCのものを設定。
    サーバ->>PC: ARP応答<br/>目標プロトコルアドレス、MACアドレスにPCのアドレスを設定。<br/>送信元プロトコルアドレス、MACアドレスにサーバのものを設定。
    PC->>サーバ: 本来やりたい通信<br/>宛先MACアドレスは（直接ルーティングなので）サーバAのもの。<br/>IPヘッダの宛先アドレスはサーバA
```
