---
title:  "ネットワークの冗長性を実現する要素技術"
categories: ネットワークスペシャリスト
outline: 冗長化の技術名と冗長化のイメージが一致しない
tags:
- ルーティング

---

- [1. 冗長化技術](#1-冗長化技術)
  - [1.1. Link Aggregation](#11-link-aggregation)
  - [1.2. Spanning Tree Protocol](#12-spanning-tree-protocol)
  - [1.3. Vitual Router Redundancy Protocol](#13-vitual-router-redundancy-protocol)
  - [1.4. NICチーミング](#14-nicチーミング)
  - [1.5. リンクステートトラッキング](#15-リンクステートトラッキング)


# 1. 冗長化技術

片方がぶっ壊れても大丈夫！

## 1.1. Link Aggregation

- スイッチングハブ間のリンクを複数本集約して、論理的な1本のリンクを構成する仕組みをリンクアグリゲーションと呼ぶ
- 8本まで物理リンクを一本にできる
- 動的と静的の2種類がある
- 動的なリンクアグリゲーションはLink Aggregation Control Proctcolを用いて定期的に疎通確認を行う
- 静的なリンクアグリゲーションは物理的なリンクダウンのみ障害が発生したと判断する
- **スタック接続**されたスイッチに適用できる
- NICチーミングの設定において、同一のチームのNICがすべて2台のスイッチに接続されている時に適用できる


## 1.2. Spanning Tree Protocol

- ネットワーク構成のループを防ぐプロトコル
- ブリッジプライオリティを設定することで物理的にはループ状になっていても、論理的にはツリー状となる
- 最もプライオリティが高いものを**マスタルータ**と呼ぶ
- 障害が発生するたびに互いと情報をやり取りしてスパニングツリーを再構成する（スパニングツリーが収束して完成？することをコンバージェンスというらしい）
- 構成する手順
  1. ルートブリッジの設定
  2. ルートポート、代表ポート、オルタネートポート
  3. スパニングツリーの維持と障害検出
- 最近はRapid Spanning Tree Protocolというのもあるらしい（数秒単位でのSPの構成が可能）


## 1.3. Vitual Router Redundancy Protocol

- 同一サブネット内のルータをグループ化することで1台のルータのように扱える（仮想ルータ）
- 同一サブネットに複数の仮想ルータを稼働できる

## 1.4. NICチーミング

- NICを論理的に一つに束ねる技術
- OSからは一つのNICに見えるが片方のNICに障害が発生しても継続して運用できる

## 1.5. リンクステートトラッキング

- 下位リンクの状態を上位リンクの状態によって切り替える機能
- 上位に障害が発生したときに下位をダウンさせるなどできる
- 下位ポート、上位ポート、どちらでもないポートに自由にせっていできるらしい
